
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_account', '7e645534a283671bac066c3c76e14074', 'account', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_channel', '7e645534a283671bac066c3c76e14074', 'channel', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_cms', '7e645534a283671bac066c3c76e14074', 'cms', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_gateway', '7e645534a283671bac066c3c76e14074', 'gateway', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_homework', '7e645534a283671bac066c3c76e14074', 'homework', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_merchant', '7e645534a283671bac066c3c76e14074', 'merchant', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_oms', '7e645534a283671bac066c3c76e14074', 'oms', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);


insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_account', 'tst', 'tst', null, '20210616154023000001', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_channel', 'tst', 'tst', null, '20210616154023000002', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_cms', 'tst', 'tst', null, '20210616154023000003', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_gateway', 'tst', 'tst', null, '20210616154023000004', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_homework', 'tst', 'tst', null, '20210616154023000005', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_merchant', 'tst', 'tst', null, '20210616154023000006', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_oms', 'tst', 'tst', null, '20210616154023000007', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);

insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000001', '{}', 1, null, '2021-06-16 16:13:22', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000001', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000001', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000002', '{}', 1, null, '2021-06-16 16:13:22', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000002', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000002', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000003', '{}', 1, null, '2021-06-16 16:13:22', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000003', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000003', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000004', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000004', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000005', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000005', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000006', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000006', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000007', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000007', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);


use navigator;
select ai.app_id,ai.app_key,ai.app_name,ai.department,ai.owner,ci.notify_url,ci.cluster, ci.profile, ci.cid, ci.config, ci.created_at,ci.created_by from  (select * from (select max(created_at) as fcreate_at,cid as fcid from t_app_config group by cid ) f left join (select p.app_id,p.cluster ,p.profile,p.notify_url,p.cid as cid,c.config,c.created_at,c.created_by from t_app_profile p left join t_app_config c on p.cid = c.cid where p.status=1) e on e.cid = f.fcid and e.created_at= f.fcreate_at)  ci left join  t_app_inf ai  on ai.app_id = ci.app_id where ai.status = 1 ;


select ai.app_id,ai.app_key,ai.app_name,ai.department,ai.owner,ci.notify_url,ci.cluster, ci.profile, ci.cid, ci.config, ci.created_at,ci.created_by from  (select * from (select max(created_at) as fcreate_at,cid as fcid from t_app_config group by cid ) f left join (select p.app_id,p.cluster ,p.profile,p.notify_url,p.cid as cid,c.config,c.created_at,c.created_by from t_app_profile p left join t_app_config c on p.cid = c.cid where p.status=1) e on e.cid = f.fcid and e.created_at= f.fcreate_at)  ci left join  t_app_inf ai  on ai.app_id = ci.app_id where ai.status = 1 and ai.app_id = 'rocket_oms' and ci.cluster='tst' and ci.profile='tst' ;