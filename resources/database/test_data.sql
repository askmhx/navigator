
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_ACCOUNT', '7e645534a283671bac066c3c76e14074', 'ACCOUNT', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_CHANNEL', '7e645534a283671bac066c3c76e14074', 'CHANNEL', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_CMS', '7e645534a283671bac066c3c76e14074', 'CMS', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_GATEWAY', '7e645534a283671bac066c3c76e14074', 'GATEWAY', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_HOMEWORK', '7e645534a283671bac066c3c76e14074', 'HOMEWORK', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_MERCHANT', '7e645534a283671bac066c3c76e14074', 'MERCHANT', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);
insert into navigator.t_app_inf (app_id, app_key, app_name, department, owner, status, memo, created_at, created_by, updated_at, updated_by) values ('rocket_oms', '7e645534a283671bac066c3c76e14074', 'OMS', 'boss', 'askmhx', 1, null, '2021-06-16 16:01:18', 'askmhx', null, null);


insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_ACCOUNT', 'TST', 'TST', null, '20210616154023000001', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_CHANNEL', 'TST', 'TST', null, '20210616154023000002', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_CMS', 'TST', 'TST', null, '20210616154023000003', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_GATEWAY', 'TST', 'TST', null, '20210616154023000004', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_HOMEWORK', 'TST', 'TST', null, '20210616154023000005', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_MERCHANT', 'TST', 'TST', null, '20210616154023000006', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);
insert into navigator.t_app_profile (app_id, cluster, profile, notify_url, cid, status, memo, created_at, created_by, updated_at, updated_by) values ('ROCKET_OMS', 'TST', 'TST', null, '20210616154023000007', 1, null, '2021-06-16 16:07:37', 'askmhx', null, null);

insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000001', '{}', 1, null, '2021-06-16 16:13:22', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000001', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000001', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000002', '{}', 1, null, '2021-06-16 16:13:22', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000002', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000002', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000003', '{}', 1, null, '2021-06-16 16:13:22', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000003', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000003', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000004', '{
  "server": {
    "charset": "utf-8",
    "addr": "127.0.0.1",
    "mode":"release",
    "port": 3306
  },
  "redis_server": {
    "authpass": "maserati",
    "redisaddrs": "127.0.0.1"
  },
  "minio_server": {
    "accesskeyid": "maserati",
    "endpoint": "127.0.0.1",
    "usessl": false,
    "secretaccesskey": "rkt_trade"
  },
  "database": {
    "user": "root",
    "password": "maserati",
    "host": "127.0.0.1",
    "port": 3306,
    "schema": "rkt_trade"
  },
  "log": {
    "file": "logs/levante.log",
    "rotatetype": "time",
    "rotatevalue": "60*60*24",
    "rotatecount": 7,
    "level": "debug"
  }
}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000004', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000005', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000005', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000006', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000006', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000007', '{}', 1, null, '2021-06-16 16:13:23', 'askmhx', null, null);
insert into navigator.t_app_config (cid, config, status, memo, created_at, created_by, updated_at, updated_by) values ('20210616154023000007', '{}', 1, null, '2021-06-16 16:13:24', 'askmhx', null, null);


use navigator;
select ai.app_id,ai.app_key,ai.app_name,ai.department,ai.owner,ci.notify_url,ci.cluster, ci.profile, ci.cid, ci.config, ci.created_at,ci.created_by from  (select * from (select max(created_at) as fcreate_at,cid as fcid from t_app_config group by cid ) f left join (select p.app_id,p.cluster ,p.profile,p.notify_url,p.cid as cid,c.config,c.created_at,c.created_by from t_app_profile p left join t_app_config c on p.cid = c.cid where p.status=1) e on e.cid = f.fcid and e.created_at= f.fcreate_at)  ci left join  t_app_inf ai  on ai.app_id = ci.app_id where ai.status = 1 ;


select ai.app_id,ai.app_key,ai.app_name,ai.department,ai.owner,ci.notify_url,ci.cluster, ci.profile, ci.cid, ci.config, ci.created_at,ci.created_by from  (select * from (select max(created_at) as fcreate_at,cid as fcid from t_app_config group by cid ) f left join (select p.app_id,p.cluster ,p.profile,p.notify_url,p.cid as cid,c.config,c.created_at,c.created_by from t_app_profile p left join t_app_config c on p.cid = c.cid where p.status=1) e on e.cid = f.fcid and e.created_at= f.fcreate_at)  ci left join  t_app_inf ai  on ai.app_id = ci.app_id where ai.status = 1 and ai.app_id = 'rocket_oms' and ci.cluster='TST' and ci.profile='TST' ;